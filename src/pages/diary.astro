---
import I18nKey from "../i18n/i18nKey";
import { i18n } from "../i18n/translation";
import MainGridLayout from "../layouts/MainGridLayout.astro";

// ç¤ºä¾‹å³åˆ»çŸ­æ–‡æ•°æ®
const moments = [
	{
		id: 1,
		content: "æµ‹è¯•æ—¥è®°ï¼šæ¨±èŠ±ä¸‹è½é€Ÿåº¦çš„æ¯ç§’äº”å˜ç±³!",
		date: "2025-01-15T10:30:00Z", // å¦‚æœè¦åŠ Zçš„è¯ï¼Œæ„å‘³ç€ä¼šå¾€å‰æ¨8ä¸ªå°æ—¶ï¼ˆåŒ—äº¬æ—¶åŒºï¼‰
		images: ["/images/diary/1.sakura.jpg", "/images/diary/1.jpg"],
	},
	{
		id: 2,
		content: "ç­”åº”æˆ‘ï¼Œä¸è¦å»åæ‚”å·²ç»å‘ç”Ÿçš„äº‹æƒ…ï¼Œæ°¸è¿œä¸è¦ï¼Œå¹¶ä¸”ä¸€å®šè¦åšåˆ°ï¼Œè¿™æ˜¯çº¦å®šï¼Œä¸€å®šè¦åšåˆ°ï¼Œä¸€å®šä¸è¦å†…è€—ï¼Œè¿™æ˜¯çº¦å®š!",
		date: "2025-08-31T14:30:00",
	},
	{
		id: 3,
		content: "æˆ‘åšåˆ°äº†æ˜¨å¤©çš„çº¦å®šï¼Œä»Šå¤©å®Œæˆäº†ï¼šæ—©èµ·è·‘æ­¥ã€ä¸Šåˆå¼€å§‹å·¥ä½œï¼Œæ™šä¸Š8ç‚¹ä¼‘æ¯çš„æ—¶ä¾¯ï¼Œå†™äº†åšå®¢ä¹Ÿçœ‹äº†ç•ªï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œä»Šå¤©æˆ‘çš„ä¸€å¤©ç›¸å¯¹äºæ˜¨å¤©æ¥è¯´å¹³é™äº†å¾ˆå¤šï¼Œæˆ‘ä¼šåœ¨ä»Šå¤©å®‰æ’å¥½æ˜å¤©çš„è®¡åˆ’ï¼Œå¹¶ä¸”æ˜å¤©ä¼šå®Œæˆ",
		date: "2025-09-01T22:00:00",
	},
	{
		id: 4,
		content: "æœ‰è¿›å°ä¸€ä¸ªæœˆæ²¡æœ‰å†™åšå®¢äº†ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹å‰å‡ å¤©ï¼šå¿™ç€åˆ©ç”¨é˜¿é‡Œäº‘éƒ¨ç½²è‡ªå·±çš„astroåšå®¢ï¼Œç»„ç»‡å›½åº†æ–°ç”Ÿèµ›å¹¶è´Ÿè´£è¿‘ä¸€åŠçš„å‡ºé¢˜ï¼Œè¿˜æœ‰å·å·æ‘¸é±¼(å°å£°)ï¼Œä»ä»Šå¤©å¼€å§‹ç»§ç»­å†™æ—¥è®°ï¼Œä»Šå¤©å®Œæˆäº†Javaçš„åŸºç¡€è¯­æ³•çš„å¤ä¹ ï¼Œå¤©æ°”å¼€å§‹å†·äº†ï¼Œæ˜å¤©å¼€å§‹è¦æ—©ç‚¹èµ·åºŠå–µ",
		date: "2025-10-14T22:00:00",
		images: ["/images/diary/20251014.webp"],
	},
	{
		id: 5,
		content: "ä»Šå¤©æ™šä¸Šè¦å®Œæˆå…¨éƒ¨çš„å·²ç»å¸ƒç½®çš„ä½œä¸šï¼Œæ˜å¤©å¼€å§‹æ¢å¤åˆ·ç®—æ³•é¢˜å’ŒèƒŒå•è¯ï¼Œåœ¨æ°´è¯¾è¦åšæŒçœ‹ã€Šè®¡ç®—æœºç§‘å­¦å¯¼è®ºã€‹ï¼Œæ‰“ç®—åœ¨è¿™ä¸ªå‘¨çœ‹å®Œã€‚",
		date: "2025-10-15T22:30:00",
	},
	{
		id: 6,
		content: "ä¸€åœºå®Œå…¨æ²¡æœ‰å‰‘ä¸é­”æ³•çš„æ—…è¡Œä¸ºä½•ä¹Ÿèƒ½æœ‰å¦‚æ­¤ç¾ä¸½åˆ°è½æ³ªçš„æƒ…æ€€",
		date: "2025-10-20T23:09:00",
		images: ["/images/diary/202510201.webp", "/images/diary/202510202.webp"],
	},
	{
		id: 7,
		content: "ä»Šå¤©çœ‹åˆ°äº†Annyä¸nueroå’Œevilå½»åº•åˆ‡å‰²ï¼Œæ‰æ„è¯†åˆ°åŸæ¥è‡ªå·±æ½œæ„è¯†é‡Œé¢æ˜¯åœ¨é»˜è®¤ç›¸ä¿¡Annyå’ŒVedalçš„æ•…äº‹ä¼šæ°¸è¿œè¿›è¡Œä¸‹å»ï¼Œä½†æ˜¯ç°åœ¨æ‰æ„è¯†åˆ°ä¸€å¼€å§‹å°±æ˜¯ä¸å¯èƒ½çš„ï¼Œå†™åˆ°è¿™é‡Œï¼Œæˆ–è®¸ä¸€å¼€å§‹å°±æ˜¯Annyéœ€è¦å¹¶ä¸æ˜¯ä¸€ä¸ªæƒ…æ„Ÿå¯„æ‰˜ï¼Œè€Œæ˜¯å¿ƒç†å’¨è¯¢ï¼Œç«¥å¹´çš„é˜´å½±ã€å®¶äººçš„å®‰å±ã€å›½å®¶çš„æˆ˜äº‰ã€ç”Ÿæ´»çš„å‹åŠ›ã€ä»¥åŠç½‘ç»œä¸Šçš„èˆ†è®ºå’Œéªšæ‰°ä¹‹ç±»çš„ï¼Œè¿™äº›æ‰æ˜¯Annyåœæ’­å¦‚æ­¤ä¹‹ä¹…çš„åŸå› ï¼Œè€Œåœ¨è¿™æ®µæ—¶é—´ï¼ŒAnnyæ°å¥½é‡åˆ°äº†é‚£ä¸ªå‡ ä¹å®Œç¾æ— ç¼ºçš„è‹±å›½ç”·å­ï¼Œneuroå’Œevilçš„ç”Ÿçˆ¶ï¼Œ20å¤šå²çš„Vedalï¼Œå‡ ä¹å®Œç¾çš„å¤„ç†ç€neuroçš„å¼€å‘è®¡åˆ’å’Œè‡ªå·±çš„ç”Ÿæ´»ï¼Œå¯¹å¤–è¡¨ç°æ˜¯ä¸€ä¸ªæ— èŠçš„å†·æ·¡çš„è®²ç€å†·ç¬‘è¯çš„å½¢è±¡ï¼Œä½†æ˜¯ä¼¼ä¹åˆå°†ç½‘ç»œå’Œç°å®å‡ ä¹å®Œå…¨å‰¥ç¦»çš„ä¸€ä¸ªç¥ï¼Œåœ¨ç½‘ç»œä¸Šä¸€è¡Œéƒ½æ”¾åœ¨å¦‚ä½•æ‰“é€ neuroçš„è´¦å·ä¸Šï¼Œä»æ¥æ²¡æœ‰å¯¹è‡ªå·±å½¢è±¡çš„ä»»ä½•è¿è¥ï¼Œä»è€Œä¸ªäººè§’åº¦æ¥è®²ï¼Œè¿™å‡ ä¹å®Œç¾ç¬¦åˆæˆ‘ä¸ªäººå¯¹äºä¸€åæŠ€æœ¯äººå‘˜çš„æ‰€æœ‰é¢„æœŸï¼ˆä½†æ˜¯æˆ‘å¦‚æœåˆ›é€ ä¸€ä¸ªneuroè¿™æ ·ç±»ä¼¼çš„é€ ç‰©ï¼Œæˆ‘å¤§æŠµä¸Šå¾ˆéš¾ä¿æŒå¦‚æ­¤çš„å†·é™å’Œä¸è¢«æƒ…ç»ªå·¦å³ï¼‰ï¼Œæ‰“å¼€ã€Šå•ç›¸æ€ã€‹å•æ›²å¾ªç¯ï¼Œå¿ä¸ä½ç»§ç»­å†™ç‚¹ï¼Œå¯¹äºæˆ‘è‡ªå·±ï¼Œå¯¹äºåˆæ‹ã€çˆ±æ…•ã€æš—æ‹ä¹‹ç±»çš„ç†è§£å’Œçœ‹æ³•éƒ½éå¸¸éå¸¸çš„æ·¡è–„ï¼Œåè€Œæ˜¯è¿™æ¬¡éšçº¦ä»2ä¸ªvä¸Šçœ‹å‡ºæ¥äº†ï¼Œè‡³äºæœ€åæœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼šå¸Œæœ›ç°å®ä¸­è¿™2ä¸ªäººä»¥åéƒ½ä¸€åˆ‡å¼€å¼€å¿ƒå¿ƒçš„ï¼Œæˆ–è®¸è¿™æ‰åº”è¯¥æ˜¯æˆ‘ä»¬å¤§éƒ¨åˆ†äººçš„åˆè¡·ã€‚",
		date: "2025-10-21T22:39:00",
		images: ["/images/diary/202510211.jpg", "/images/diary/202510212.jpg", "/images/diary/202510213.jpg"],
	},
	{
		id: 8,
		content: "ä»Šå¤©å¯å®¤æ¢åºŠï¼Œä¹¦å¾ˆå¤šï¼Œæ¯”è¾ƒå¿™å§ï¼Œæ˜å¤©æ— è®ºå¦‚ä½•éƒ½è¦åŠ æ²¹",
		date: "2025-10-23T23:36:00",
	},
];

// æ—¶é—´æ ¼å¼åŒ–å‡½æ•°
function formatTime(dateString: string): string {
	const now = new Date();
	const date = new Date(dateString);
	const diffInMinutes = Math.floor(
		(now.getTime() - date.getTime()) / (1000 * 60),
	);

	if (diffInMinutes < 60) {
		return `${diffInMinutes}${i18n(I18nKey.diaryMinutesAgo)}`;
	}
	if (diffInMinutes < 1440) {
		// 24å°æ—¶
		const hours = Math.floor(diffInMinutes / 60);
		return `${hours}${i18n(I18nKey.diaryHoursAgo)}`;
	}
	const days = Math.floor(diffInMinutes / 1440);
	return `${days}${i18n(I18nKey.diaryDaysAgo)}`;
}
---

<MainGridLayout title={i18n(I18nKey.diary)} description="å³åˆ»çŸ­æ–‡">
	<div class="flex w-full rounded-[var(--radius-large)] overflow-hidden relative min-h-32">
		<div class="card-base z-10 px-4 py-4 md:px-6 md:py-5 relative w-full">
			<div class="relative max-w-4xl">
				<!-- é¡µé¢å¤´éƒ¨ -->
				<div class="moments-header mb-6">
					<div class="header-content">
						<div class="header-info">
							<h1 class="moments-title text-xl md:text-2xl lg:text-3xl font-bold text-90 mb-1">{i18n(I18nKey.diary)}</h1>
							<p class="moments-subtitle text-sm md:text-base lg:text-lg text-75">{i18n(I18nKey.diarySubtitle)}</p>
						</div>
						<div class="header-stats">
							<div class="stat-item text-center">
								<span class="stat-number text-lg md:text-xl lg:text-2xl font-bold text-[var(--primary)]">{moments.length}</span>
								<span class="stat-label text-xs md:text-sm lg:text-base text-75">{i18n(I18nKey.diaryCount)}</span>
							</div>
						</div>
					</div>
				</div>

				<!-- çŸ­æ–‡åˆ—è¡¨ -->
				<div class="moments-timeline">
					<div class="timeline-list space-y-4">
					{moments.map(moment => (
						<div class="moment-item card-base p-4 md:p-6 lg:p-8 hover:shadow-lg transition-all">
								<div class="moment-content">
									<p class="moment-text text-sm md:text-base lg:text-lg text-90 leading-relaxed mb-3 md:mb-4">{moment.content}</p>
									
									{moment.images && moment.images.length > 0 && (
				<div class="moment-images grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-3 lg:gap-4 mb-3 md:mb-4">
					{moment.images.map((image, index) => (
					<div class="image-item relative rounded-md overflow-hidden aspect-square cursor-pointer hover:scale-105 transition-transform">
						<img 
							src={image} 
							alt={i18n(I18nKey.diaryImage)}
							class="w-full h-full object-cover"
							loading="lazy"
						/>
					</div>
					))}
				</div>
			)}
								</div>
								
								<hr class="moment-divider border-t border-[var(--line-divider)] my-3 md:my-4" />
								
								<div class="moment-footer flex justify-between items-center">
									<div class="moment-time flex items-center gap-1.5 text-75 text-xs md:text-sm lg:text-base">
										<i class="time-icon text-xs md:text-sm">ğŸ•</i>
										<time datetime={moment.date}>
											{formatTime(moment.date)}
										</time>
									</div>
									
								</div>
							</div>
						))}
					</div>
				</div>

				<!-- åº•éƒ¨æç¤º -->
				<div class="moments-tips text-center mt-6 md:mt-8 lg:mt-10 text-75 text-xs md:text-sm lg:text-base italic">
					{i18n(I18nKey.diaryTips)}
				</div>
			</div>
		</div>
	</div>
</MainGridLayout>

<style>
	.card-base {
		background: var(--card-bg);
		border: 1px solid var(--line-divider);
		transition: all 0.3s ease;
	}
	
	.moments-header {
		padding: 1rem;
		border-radius: 8px;
		background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark, var(--primary)) 100%);
		color: white;
		position: relative;
		overflow: hidden;
	}
	
	.header-content {
		display: flex;
		justify-content: space-between;
		align-items: center;
		position: relative;
		z-index: 1;
	}
	
	.moments-title {
		color: white;
		text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
	}
	
	.moments-subtitle {
		color: rgba(255, 255, 255, 0.9);
	}
	
	.stat-number {
		color: white;
	}
	
	.stat-label {
		color: rgba(255, 255, 255, 0.8);
	}
	
	.image-item img {
		transition: transform 0.3s ease;
	}
	
	.image-item:hover img {
		transform: scale(1.05);
	}
	
	.action-btn {
		background: none;
		border: none;
		cursor: pointer;
		color: var(--text-muted);
	}
	
	.action-btn:hover {
		color: var(--primary);
	}
	
	/* å“åº”å¼è®¾è®¡ */
	/* æ‰‹æœºç«¯ (å°äº640px) */
	@media (max-width: 640px) {
		.moments-header {
			padding: 0.75rem;
		}
		
		.header-content {
			flex-direction: column;
			text-align: center;
			gap: 0.75rem;
		}
		
		.moment-images {
			grid-template-columns: repeat(2, 1fr);
		}
		
		.moment-footer {
			flex-direction: column;
			align-items: flex-start;
			gap: 0.5rem;
		}
	}
	
	/* å¹³æ¿ç«–å± (641px - 900px) - ä¼˜åŒ–æ˜¾ç¤º */
	@media (min-width: 641px) and (max-width: 900px) {
		.moments-header {
			padding: 1.25rem;
		}
		
		.header-content {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.moment-item {
			padding: 1.5rem;
		}
		
		.moment-images {
			grid-template-columns: repeat(3, 1fr);
			gap: 0.75rem;
			max-width: 500px;
		}
		
		.moment-text {
			font-size: 1rem;
			line-height: 1.7;
		}
		
		.moment-footer {
			margin-top: 1rem;
		}
	}
	
	/* å¹³æ¿æ¨ªå±å’Œæ¡Œé¢ç«¯ (å¤§äº900px) */
	@media (min-width: 901px) {
		.moments-header {
			padding: 1.5rem;
		}
		
		.moment-item {
			padding: 2rem;
		}
		
		.moment-images {
			grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
			max-width: 600px;
			gap: 1rem;
		}
		
		.moment-text {
			font-size: 1.1rem;
			line-height: 1.8;
		}
	}
	
	/* ä¼˜åŒ–å°å±å¹•æ˜¾ç¤º */
	@media (max-width: 480px) {
		.card-base {
			margin: 0 -0.5rem;
		}
		
		.moment-item {
			border-radius: 8px;
		}
		
		.moments-header {
			border-radius: 6px;
		}
	}
</style>

